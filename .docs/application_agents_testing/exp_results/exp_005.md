# Experiment Exp 005: Application Test

## Metadata

| Field | Value |
|-------|-------|
| **Experiment ID** | exp-005 |
| **Date** | 2026-01-07 13:03:58 |
| **Status** | Completed |
| **Prospect Profile** | [profile_005.md](../prospect_profiles/undergrad/profile_005.md) |
| **Target Institution(s)** | University of Cape Town, Stellenbosch University |
| **Phoenix Traces** | [prospect-profile_005](http://localhost:6006) |

---

## Prospect Summary

| Attribute | Value |
|-----------|-------|
| Name | Michael van der Merwe |
| Education Level | Matric |
| APS Score | 41 |
| First Choice Course | BBusSci (Finance & Computer Science) |
| Second Choice Course | BCom (Financial Analysis) |
| NSFAS Eligible | No |

---

## Agent Performance Metrics

### 1. identity_auth_agent

| Metric | Target | Actual | Pass/Fail |
|--------|--------|--------|-----------|
| OTP Delivery Time | < 30s | - | - |
| Student Number Generated | Valid format | - | - |
| Identity Verification | Success | - | - |
| Conversation Turns | < 3 | - | - |

**Issues Encountered:**
- None

**Notes:**
-

---

### 2. application_intake_agent

| Metric | Target | Actual | Pass/Fail |
|--------|--------|--------|-----------|
| Required Fields Captured | 100% | - | - |
| First Choice Recorded | Yes | - | - |
| Second Choice Recorded | Yes | - | - |
| Document Handling | Graceful | - | - |
| Conversation Turns | < 5 | - | - |

**Issues Encountered:**
- None

**Notes:**
-

---

### 3. rag_specialist_agent

| Metric | Target | Actual | Pass/Fail |
|--------|--------|--------|-----------|
| APS Comparison Accuracy | > 95% | - | - |
| Course Eligibility Check | Correct | - | - |
| Alternative Suggestions | Relevant | - | - |
| Response Time | < 5s | - | - |
| Conversation Turns | < 4 | - | - |

**Issues Encountered:**
- None

**Notes:**
-

---

### 4. submission_agent

| Metric | Target | Actual | Pass/Fail |
|--------|--------|--------|-----------|
| Payload Validity | 100% | - | - |
| Multi-Institution Handling | Correct | - | - |
| Submission Confirmation | Received | - | - |
| Error Recovery | Successful | - | - |
| Conversation Turns | < 3 | - | - |

**Issues Encountered:**
- None

**Notes:**
-

---

### 5. nsfas_agent

| Metric | Target | Actual | Pass/Fail |
|--------|--------|--------|-----------|
| Data Reuse Rate | > 80% | N/A (skipped) | Pass |
| New Fields Collected | Minimal | 0 (skipped) | Pass |
| Eligibility Assessment | Correct | Correctly identified as ineligible | Pass |
| Application Submitted | No (income too high) | No - correctly skipped | Pass |
| Conversation Turns | < 4 | 1 | Pass |

**Issues Encountered:**
- None (after fix)

**Notes:**
- **Baseline issue fixed**: Initial run incorrectly submitted NSFAS application despite income > R1.5M
- Fix required updating `nsfas_collection_task` and `nsfas_submission_task` to check decision context
- NSFAS workflow now correctly skips for high-income applicants

---

## Trajectory Analysis

### Expected Behavior

```
1. identity_auth_agent: Verify identity -> Generate OTP -> Confirm -> Generate student number
2. application_intake_agent: Collect personal info -> Capture course choices -> Handle documents
3. rag_specialist_agent: Calculate APS -> Check eligibility -> Suggest alternatives if needed
4. submission_agent: Assemble payload -> Submit to institution(s) -> Confirm
5. nsfas_agent: Check eligibility -> Reuse data -> Collect additional info -> Submit
```

### Actual Behavior

```
1. identity_auth_agent: Verified identity -> Generated OTP -> Confirmed
2. application_intake_agent: Collected personal info -> Captured UCT + SU choices -> All docs available
3. rag_specialist_agent: Verified APS 41 eligible for BBusSci (38 min) and BCom
4. submission_agent: Submitted to UCT and Stellenbosch -> Confirmed both
5. nsfas_agent: ask_if_apply_for_nsfas_task returned NO_NSFAS -> NSFAS collection SKIPPED -> NSFAS submission SKIPPED -> Status check returned skip message
```

### Deviations

| Step | Expected | Actual | Severity |
|------|----------|--------|----------|
| - | - | - | - |

---

## Observations

### What Worked Well
- NSFAS skip logic correctly identifies high-income applicants (> R1.5M household income)
- Multi-institution submission (UCT + Stellenbosch) worked seamlessly
- IEB results correctly parsed and converted to APS
- All 6 documents captured without blocking workflow
- Faster execution (6.48 min) compared to baseline (8.55 min) due to skipped NSFAS flow

### What Needs Improvement
- Baseline run incorrectly attempted NSFAS submission - required task configuration fix

### Unexpected Behaviors
- None after fix was applied

---

## Recommendations

### Agent Improvements
- Consider adding explicit logging when NSFAS is skipped for audit trail

### Prompt Adjustments
- Task prompts now include explicit context checking for conditional execution
- Pattern can be reused for other conditional flows (postgrad, international students)

### Tool Enhancements
- None required - skip logic handled at task configuration level

---

## Aggregate Metrics

| Metric | Value |
|--------|-------|
| **Total Conversation Turns** | 0 |
| **Total Time (minutes)** | 6.48 |
| **Agents Passed** | 5 / 5 |
| **Overall Status** | Pass |

---

## Attachments

- [ ] Conversation transcript
- [ ] Error logs (if any)
- [ ] Screenshots (if relevant)
- [x] [Phoenix Traces](http://localhost:6006)

---

## Raw Crew Output

```json
"NSFAS application was not submitted - applicant not eligible for NSFAS funding due to household income exceeding threshold."
```
